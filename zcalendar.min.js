if("undefined"==typeof jQuery)throw new Error("jQuery is not loaded");!function(a){a.fn.zcalendar=function(e){var t=a.extend({},a.fn.zcalendar_defaults(),e),n=a.fn.zcalendar_language(t.language);return t=a.extend({},t,n),this.each(function(){function e(){var e=parseInt(M.data("initYear")),t=parseInt(M.data("initMonth"))-1,o=new Date(e,t,1,0,0,0,0);M.data("initDate",o);var d=M.data("cellBorder")===!0?" table-bordered":"";$tableObj=a('<table class="table'+d+'"></table>'),$tableObj=n(M,$tableObj,o.getFullYear(),o.getMonth()),$legendObj=r(M);var i=a('<div class="zcalendar" id="'+M.attr("id")+'"></div>');i.append($tableObj),i.append($legendObj),M.append(i);var l=M.data("jsonData");!1!==l&&c(M,o.getFullYear(),o.getMonth())}function n(a,e,t,n){var r=new Date(t,n,1,0,0,0,0);return a.data("currDate",r),e.empty(),e=o(a,e,t,n),e=i(a,e),e=l(a,e,t,n),c(a,t,n),e}function r(e){var t=a('<div class="legend" id="'+e.attr("id")+'_legend"></div>'),n=e.data("legendList");return"object"==typeof n&&n.length>0&&a(n).each(function(e,n){if("object"==typeof n&&"type"in n){var r="";switch("label"in n&&(r=n.label),n.type){case"text":if(""!==r){var o="";if("badge"in n){var d=null;d="undefined"==typeof n.classname?"badge-event":n.classname,o='<span class="badge '+d+'">'+n.badge+"</span> "}t.append('<span class="legend-'+n.type+'">'+o+r+"</span>")}break;case"block":""!==r&&(r="<span>"+r+"</span>");var i=null;i="undefined"==typeof n.classname?"event":"event-styled "+n.classname,t.append('<span class="legend-'+n.type+'"><ul class="legend"><li class="'+i+'"></li></u>'+r+"</span>");break;case"list":if("list"in n&&"object"==typeof n.list&&n.list.length>0){var l=a('<ul class="legend"></u>');a(n.list).each(function(a,e){l.append('<li class="'+e+'"></li>')}),t.append(l)}break;case"spacer":t.append('<span class="legend-'+n.type+'"> </span>')}}}),t}function o(e,t,r,o){var d=e.data("navIcons"),i=a('<span><span class="glyphicon glyphicon-chevron-left"></span></span>'),l=a('<span><span class="glyphicon glyphicon-chevron-right"></span></span>');"object"==typeof d&&("prev"in d&&i.html(d.prev),"next"in d&&l.html(d.next));var s=e.data("showPrevious");("number"==typeof s||s===!1)&&(s=w(e.data("showPrevious"),!0));var c=a('<div class="calendar-month-navigation"></div>');c.attr("id",e.attr("id")+"_nav-prev"),c.data("navigation","prev"),s!==!1&&(prevMonth=o-1,prevYear=r,-1==prevMonth&&(prevYear-=1,prevMonth=11),c.data("to",{year:prevYear,month:prevMonth+1}),c.append(i),"function"==typeof e.data("actionNavFunction")&&c.click(e.data("actionNavFunction")),c.click(function(){n(e,t,prevYear,prevMonth)}));var u=e.data("showNext");("number"==typeof u||u===!1)&&(u=w(e.data("showNext"),!1));var p=a('<div class="calendar-month-navigation"></div>');p.attr("id",e.attr("id")+"_nav-next"),p.data("navigation","next"),u!==!1&&(nextMonth=o+1,nextYear=r,12==nextMonth&&(nextYear+=1,nextMonth=0),p.data("to",{year:nextYear,month:nextMonth+1}),p.append(l),"function"==typeof e.data("actionNavFunction")&&p.click(e.data("actionNavFunction")),p.click(function(){n(e,t,nextYear,nextMonth)}));var v=e.data("monthLabels"),b=a("<th></th>").append(c),h=a("<th></th>").append(p),f=a("<span>"+v[o]+" "+r+"</span>");f.dblclick(function(){var a=e.data("initDate");n(e,t,a.getFullYear(),a.getMonth())});var m=a('<th colspan="5"></th>');m.append(f);var g=a('<tr class="calendar-month-header"></tr>');return g.append(b,m,h),t.append(g),t}function i(e,t){if(e.data("showDays")===!0){var n=e.data("weekStartsOn"),r=e.data("dowLabels");if(0===n){var o=a.extend([],r),d=new Array(o.pop());r=d.concat(o)}var i=a('<tr class="calendar-dow-header"></tr>');a(r).each(function(a,e){i.append("<th>"+e+"</th>")}),t.append(i)}return t}function l(e,t,n,r){var o=(e.data("ajaxSettings"),y(n,r)),d=g(n,r),i=f(n,r,1),l=f(n,r,d),s=e.data("limitSelection");if("object"==typeof s)var c=new Date(s[0]),u=new Date(s[1]);var p=1,v=e.data("weekStartsOn");0===v&&(6==l&&o++,6!=i||0!=l&&1!=l&&5!=l||o--,i++,7==i&&(i=0));for(var m=0;o>m;m++){for(var _=a('<tr class="calendar-dow"></tr>'),w=0;7>w;w++){if(i>w||p>d)_.append("<td></td>");else{var M=e.attr("id")+"_"+h(n,r,p),k=M+"_day",D=a('<div id="'+k+'" class="day" >'+p+"</div>");D.data("day",p),isSelectable=new Date(n,r,p),e.data("showToday")===!0&&b(n,r,p)&&D.html('<span class="badge badge-today">'+p+"</span>");var S=a('<td id="'+M+'"></td>');S.append(D),S.data("date",h(n,r,p)),S.data("hasEvent",!1),isSelectable>=c&&isSelectable<=u?"function"==typeof e.data("actionFunction")&&(S.addClass("dow-clickable"),S.click(function(){e.data("selectedDate",a(this).data("date"))}),S.click(e.data("actionFunction"))):S.addClass("not-available"),_.append(S),p++}6==w&&(i=0)}t.append(_)}return t}function s(e,t,n,r){var o=a('<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'),d=a('<h4 class="modal-title" id="'+e+'_modal_title">'+t+"</h4>"),i=a('<div class="modal-header"></div>');i.append(o),i.append(d);var l=a('<div class="modal-body" id="'+e+'_modal_body">'+n+"</div>"),s=a('<div class="modal-footer" id="'+e+'_modal_footer"></div>');if("undefined"!=typeof r){var c=a("<div>"+r+"</div>");s.append(c)}var u=a('<div class="modal-content"></div>');u.append(i),u.append(l),u.append(s);var p=a('<div class="modal-dialog"></div>');p.append(u);var v=a('<div class="modal fade" id="'+e+'_modal" tabindex="-1" role="dialog" aria-labelledby="'+e+'_modal_title" aria-hidden="true"></div>');return v.append(p),v.data("dateId",e),v.attr("dateId",e),v}function c(a,e,t){var n=a.data("jsonData"),r=a.data("ajaxSettings");return a.data("events",!1),!1!==n?u(a):!1!==r?p(a,e,t):!0}function u(a){var e=a.data("jsonData");return a.data("events",e),v(a,"json"),!0}function p(e,t,n){var r=e.data("ajaxSettings");if("object"!=typeof r||"undefined"==typeof r.url)return alert("Invalid calendar event settings"),!1;var o={year:t,month:n+1};return a.ajax({type:"GET",url:r.url,data:o,dataType:"json"}).done(function(t){var n=[];a.each(t,function(a,e){n.push(t[a])}),e.data("events",n),v(e,"ajax")}),!0}function v(e,t){var n=(e.data("jsonData"),e.data("ajaxSettings")),r=e.data("events");r!==!1&&a(r).each(function(r,o){var d=e.attr("id")+"_"+o.date,i=a("#"+d),l=a("#"+d+"_day");if(i.data("hasEvent",!0),e.data("clickEvents")===!0&&(i.removeClass("dow-clickable"),i.off("click")),"undefined"!=typeof o.title&&i.attr("title",o.title),"undefined"==typeof o.classname?i.addClass("event"):(i.addClass("event-styled"),l.addClass(o.classname)),"undefined"!=typeof o.badge&&o.badge!==!1){var c=o.badge===!0?"":" badge-"+o.badge,u=l.data("day");l.html('<span class="badge badge-event'+c+'">'+u+"</span>")}if("undefined"!=typeof o.body){var p=!1;if("json"===t&&"undefined"!=typeof o.modal&&o.modal===!0?p=!0:"ajax"===t&&"modal"in n&&n.modal===!0&&(p=!0),p===!0){i.addClass("event-clickable");var v=s(d,o.title,o.body,o.footer);a("body").append(v),a("#"+d).click(function(){a("#"+d+"_modal").modal()})}}})}function b(a,e,t){var n=new Date,r=new Date(a,e,t);return r.toDateString()==n.toDateString()}function h(a,e,t){return d=10>t?"0"+t:t,m=e+1,m=m<10?"0"+m:m,a+"-"+m+"-"+d}function f(a,e,t){var n=new Date(a,e,t,0,0,0,0),r=n.getDay();return 0==r?r=6:r--,r}function g(a,e){for(var t=28;_(a,e+1,t+1);)t++;return t}function y(a,e){var t=g(a,e),n=f(a,e,1),r=f(a,e,t),o=t,d=n-r;return d>0&&(o+=d),Math.ceil(o/7)}function _(a,e,t){return e>0&&13>e&&a>0&&32768>a&&t>0&&t<=new Date(a,e,0).getDate()}function w(a,e){a===!1&&(a=0);var t,n=M.data("currDate"),r=M.data("initDate");if(t=12*(r.getFullYear()-n.getFullYear()),t-=n.getMonth()+1,t+=r.getMonth(),e===!0){if(t<parseInt(a)-1)return!0}else if(t>=0-parseInt(a))return!0;return!1}var M=a(this);M.attr("id","zcalendar_"+Math.floor(99999*Math.random()).toString(36)),M.data("initYear",t.year),M.data("initMonth",t.month),M.data("monthLabels",t.month_labels),M.data("weekStartsOn",t.weekstartson),M.data("navIcons",t.nav_icon),M.data("dowLabels",t.dow_labels),M.data("showToday",t.today),M.data("showDays",t.show_days),M.data("showPrevious",t.show_previous),M.data("showNext",t.show_next),M.data("cellBorder",t.cell_border),M.data("jsonData",t.data),M.data("ajaxSettings",t.ajax),M.data("legendList",t.legend),M.data("actionFunction",t.action),M.data("actionNavFunction",t.action_nav),M.data("clickEvents",t.events_clickable),M.data("limitSelection",t.selectable_dates),e()}),this},a.fn.zcalendar_defaults=function(){var a=new Date,e=a.getFullYear(),t=a.getMonth()+1,n={language:!1,year:e,month:t,show_previous:!0,show_next:!0,cell_border:!1,today:!1,show_days:!0,weekstartson:1,nav_icon:!1,data:!1,ajax:!1,legend:!1,action:!1,action_nav:!1,events_clickable:!0,selectable_dates:!1};return n},a.fn.zcalendar_language=function(a){switch(("undefined"==typeof a||a===!1)&&(a="en"),a.toLowerCase()){case"de":return{month_labels:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dow_labels:["Mo","Di","Mi","Do","Fr","Sa","So"]};case"en":return{month_labels:["January","February","March","April","May","June","July","August","September","October","November","December"],dow_labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]};case"ar":return{month_labels:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],dow_labels:["أثنين","ثلاثاء","اربعاء","خميس","جمعه","سبت","أحد"]};case"es":return{month_labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dow_labels:["Lu","Ma","Mi","Ju","Vi","Sá","Do"]};case"fr":return{month_labels:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dow_labels:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"]};case"it":return{month_labels:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dow_labels:["Lun","Mar","Mer","Gio","Ven","Sab","Dom"]};case"nl":return{month_labels:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],dow_labels:["Ma","Di","Wo","Do","Vr","Za","Zo"]};case"pl":return{month_labels:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],dow_labels:["pon.","wt.","śr.","czw.","pt.","sob.","niedz."]};case"pt":return{month_labels:["Janeiro","Fevereiro","Marco","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dow_labels:["S","T","Q","Q","S","S","D"]};case"ru":return{month_labels:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dow_labels:["Пн","Вт","Ср","Чт","Пт","Сб","Вск"]};case"se":return{month_labels:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dow_labels:["Mån","Tis","Ons","Tor","Fre","Lör","Sön"]};case"tr":return{month_labels:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dow_labels:["Pts","Salı","Çar","Per","Cuma","Cts","Paz"]};case"fi":return{month_labels:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dow_labels:["Ma","Ti","Ke","To","Pe","La","Su"]}}}}(jQuery);